---
// Import your profile image
import profileImage from "../assets/profile.jpg";
// Import CSS module
import styles from "../styles/Welcome.module.css";
---

<div class={styles.a9x7}>
  <div class={styles.b3k2}>
    <div class={styles.c5m8}>
      <!-- Image Section (Left) -->
      <div class={styles.d2p4}>
        <div class={styles.e7q1}>
          <!-- Main image with enhanced 3D effect -->
          <div>
            <img
              src={profileImage.src || "https://via.placeholder.com/400x500"}
              alt="Gian Raphael Alcantara"
              class={styles.f6s3}
            />
            <!-- Inner border glow effect -->
            <div class={styles.g1t9}></div>
          </div>
          
          <!-- Layered decorative elements for 3D effect -->
          <div class={styles.h4u5}></div>
          <div class={styles.i8v2}></div>
          
          <!-- Corner accent -->
          <div class={styles.j3w7}></div>
          
          <!-- Subtle floating dots for dimension -->
          <div class={styles.k9x4}></div>
          <div class={styles.l2y6}></div>
        </div>
      </div>

      <!-- Content Section (Right) -->
      <div class={styles.m5z8}>
        <h2 class={styles.n7a1}>
          Hello, I'm
        </h2>
        <div class={styles.o4b3}>
          <h1 class={styles.p6c9}>
            Gian Raphael Alcantara
          </h1>
        </div>
        <div class={styles.r8e7}>
          <!-- Fixed height container to prevent layout shift -->
          <h3 class={styles.s1f4} id="typewriter"></h3>
        </div>

        <div class={styles.t3g2}></div>

        <p class={styles.u9h6}>
          Passionate about creating elegant solutions through code and
          design. I focus on building clean, user-friendly experiences
          that solve real problems.
        </p>

        <div class={styles.v5i8}>
          <a
            href="#projects"
            class={styles.w7j3}
          >
            View My Work
          </a>
          <a
            href="#contact"
            class={`${styles.x4k1} group`}
          >
            Contact Me
            <svg
              xmlns="http://www.w3.org/2000/svg"
              class={styles.y2l9}
              viewBox="0 0 20 20"
              fill="currentColor"
            >
              <path
                fill-rule="evenodd"
                d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z"
                clip-rule="evenodd"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const typewriterElement = document.getElementById("typewriter");
    // Check if the element exists before proceeding
    if (!typewriterElement) return;

    const roles = [
      "Software Engineering Student",
      "Front-End Developer",
      "Back-End Developer",
      "UI/UX Enthusiast",
      "Web Developer",
    ];

    let roleIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let typingSpeed = 100; // Base typing speed in ms

    function typeWriter() {
      const currentRole = roles[roleIndex];

      if (isDeleting) {
        // Deleting text
        if (typewriterElement) {
          typewriterElement.textContent = currentRole.substring(
            0,
            charIndex - 1,
          );
        }
        charIndex--;
        typingSpeed = 50; // Faster when deleting
      } else {
        // Typing text
        if (typewriterElement) {
          typewriterElement.textContent = currentRole.substring(
            0,
            charIndex + 1,
          );
        }
        charIndex++;
        typingSpeed = 100; // Normal speed when typing
      }

      // If finished typing the current role
      if (!isDeleting && charIndex === currentRole.length) {
        isDeleting = true;
        typingSpeed = 1500; // Pause at the end of typing
      }
      // If finished deleting the current role
      else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        roleIndex = (roleIndex + 1) % roles.length; // Move to next role
        typingSpeed = 500; // Pause before typing next role
      }

      // Continue the animation
      setTimeout(typeWriter, typingSpeed);
    }

    // Start the typewriter effect
    typeWriter();
    
    // Add resize handler for responsive adjustments
    window.addEventListener('resize', handleResize);
    handleResize(); // Call once on load
  });
  
  // Function to handle responsive adjustments
  function handleResize() {
    const isMobile = window.innerWidth < 640;
    const isTablet = window.innerWidth >= 640 && window.innerWidth < 1024;
    const typewriterElement = document.getElementById("typewriter");
    
    if (typewriterElement) {
      // Adjust font size based on screen size
      if (isMobile) {
        typewriterElement.style.fontSize = '1rem';
      } else if (isTablet) {
        typewriterElement.style.fontSize = '1.125rem';
      } else {
        typewriterElement.style.fontSize = '1.5rem';
      }
    }
  }
</script>
